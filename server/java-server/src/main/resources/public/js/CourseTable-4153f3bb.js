import{g as t,c as e,a as l}from"./teachingServ-972f3a4c.js";import{m as s,a}from"./messageBox-46718661.js";import{d as o,D as n,_ as i,c as u,e as c,w as r,v as d,F as m,p,i as h,o as f,n as g}from"./index-2741d3dc.js";const y=o({data:()=>({numName:"",courseList:[],courseSelectList:[],deleteId:-1,form:{}}),created(){this.query()},methods:{makeSelectCourseList(){this.courseSelectList=[];for(let t=0;t<this.courseList.length;t++){const e=this.courseList[t];this.courseSelectList.push({id:e.courseId,value:e.num,title:e.num+"-"+e.name})}},async query(){this.courseList=await t(this.numName),this.makeSelectCourseList()},addItem(){this.form={},n("favDialog").show()},editItem(t){this.form=t,n("favDialog").show()},close(){n("favDialog").close()},async confirm(){this.close();const t=await e(this.form);0==t.code?(s(this,"保存成功"),this.query()):s(this,t.msg)},async deleteItem(t){if(!(await a("确认删除吗?")))return;const e=await l(t);0==e.code?(s(this,"删除成功"),this.query()):s(this,e.msg)}}}),b={class:"base_form"},v=c("div",{class:"base_header"},[c("div",{class:"blue_column"}),c("div",{class:"base_title"},"课程管理")],-1),x={class:"base_query_oneLine"},_={class:"query_left"},w={class:"query_right"},C=c("span",{style:{"margin-top":"5px"}},"课程号或课程名",-1),I={class:"table_center",style:{"margin-top":"5px"}},k={class:"content"},L=c("tr",{class:"table_th"},[c("td",null,"课程号"),c("td",null,"课程名"),c("td",null,"学分"),c("td",null,"材料路径"),c("td",null,"前序课"),c("td",null,"操作")],-1),q=["onClick"],S=["onClick"],U={id:"favDialog",onclose:"close()",style:{position:"absolute",top:"300px",left:"300px",width:"300px",height:"310px"}},V=c("div",{class:"base_title"},"课程添加修改对话框",-1),B={class:"dialog-div",style:{"margin-top":"5px"}},D={class:"content"},N=c("td",{colspan:"1",style:{"text-align":"right"}},"课程号",-1),j={colspan:"1"},P=c("td",{colspan:"1",style:{"text-align":"right"}},"课程名",-1),F={colspan:"1"},z=c("td",{colspan:"1",style:{"text-align":"right"}},"学分",-1),A={colspan:"1"},E=c("td",{colspan:"1",style:{"text-align":"right"}},"资料路径",-1),G={colspan:"1"},H=c("td",{colspan:"1",style:{"text-align":"right"}},"前序课",-1),J={colspan:"1"},K=["value"],M={colspan:"2"};const O=i(y,[["render",function(t,e,l,s,a,o){return f(),u(m,null,[c("div",b,[v,c("div",x,[c("div",_,[c("button",{class:"commButton",onClick:e[0]||(e[0]=e=>t.addItem())},"添加")]),c("div",w,[C,r(c("input",{type:"text","onUpdate:modelValue":e[1]||(e[1]=e=>t.numName=e),style:{"margin-left":"10px",width:"230px"}},null,512),[[d,t.numName]]),c("button",{style:{"margin-left":"5px"},class:"commButton",onClick:e[2]||(e[2]=e=>t.query())},"查询")])]),c("div",I,[c("table",k,[L,(f(!0),u(m,null,p(t.courseList,(e=>(f(),u("tr",{key:e.courseId},[c("td",null,g(e.num),1),c("td",null,g(e.name),1),c("td",null,g(e.credit),1),c("td",null,g(e.coursePath),1),c("td",null,g(e.preCourse),1),c("td",null,[c("button",{class:"table_edit_button",onClick:l=>t.editItem(e)},"编辑",8,q),c("button",{class:"table_delete_button",onClick:l=>t.deleteItem(e.courseId)},"删除",8,S)])])))),128))])])]),c("dialog",U,[V,c("div",B,[c("table",D,[c("tr",null,[N,c("td",j,[r(c("input",{"onUpdate:modelValue":e[3]||(e[3]=e=>t.form.num=e),style:{width:"97%"}},null,512),[[d,t.form.num]])])]),c("tr",null,[P,c("td",F,[r(c("input",{"onUpdate:modelValue":e[4]||(e[4]=e=>t.form.name=e),style:{width:"97%"}},null,512),[[d,t.form.name]])])]),c("tr",null,[z,c("td",A,[r(c("input",{"onUpdate:modelValue":e[5]||(e[5]=e=>t.form.credit=e),style:{width:"97%"}},null,512),[[d,t.form.credit]])])]),c("tr",null,[E,c("td",G,[r(c("input",{"onUpdate:modelValue":e[6]||(e[6]=e=>t.form.coursePath=e),style:{width:"97%"}},null,512),[[d,t.form.coursePath]])])]),c("tr",null,[H,c("td",J,[r(c("select",{class:"commInput","onUpdate:modelValue":e[7]||(e[7]=e=>t.form.preCourseId=e)},[(f(!0),u(m,null,p(t.courseSelectList,(t=>(f(),u("option",{key:t.id,value:t.id},g(t.title),9,K)))),128))],512),[[h,t.form.preCourseId]])])]),c("tr",null,[c("td",M,[c("button",{class:"commButton",onClick:e[8]||(e[8]=e=>t.close()),style:{"margin-right":"30px"}},"取消"),c("button",{class:"commButton",onClick:e[9]||(e[9]=e=>t.confirm())},"确认")])])])])])],64)}]]);export{O as default};
