import{b as t,d as e,e as s,s as l,f as d}from"./teachingServ-972f3a4c.js";import{m as i,a}from"./messageBox-46718661.js";import{d as n,_ as o,c as u,e as c,w as m,i as r,F as p,p as I,v as h,o as y,n as g}from"./index-2741d3dc.js";const v=n({data:()=>({scoreList:[],studentId:null,courseId:null,editedItem:{},studentList:[],courseList:[],deleteId:-1}),computed:{},created(){this.initialize()},methods:{async initialize(){this.scoreList=await t(this.studentId,this.courseId),this.studentList=await e(),this.courseList=await s()},async query(){this.scoreList=await t(this.studentId,this.courseId)},addItem(){this.editedItem={};document.getElementById("favDialog").show()},editItem(t){this.editedItem=t;document.getElementById("favDialog").show()},close(){document.getElementById("favDialog").close()},async confirm(){this.close();const t=await l(this.editedItem.scoreId,this.editedItem.studentId,this.editedItem.courseId,this.editedItem.mark);0==t.code?(i(this,"保存成功"),this.query()):i(this,t.msg)},async deleteItem(t){if(!(await a("确认删除吗?")))return;const e=await d(t);0==e.code?(i(this,"删除成功"),this.query()):i(this,e.msg)}}}),b={class:"base_form"},f=c("div",{class:"base_header"},[c("div",{class:"blue_column"}),c("div",{class:"base_title"},"课程管理")],-1),k={class:"base_query_oneLine"},x={class:"query_left"},_={class:"query_right"},L=c("span",{style:{"margin-top":"5px"}},"学生",-1),w=c("option",{value:"0"},"请选择...",-1),B=["value"],C=c("span",{style:{"margin-top":"5px"}},"课程",-1),q=c("option",{value:"0"},"请选择...",-1),N=["value"],U={class:"table_center",style:{"margin-top":"5px"}},V={class:"content"},D=c("tr",{class:"table_th"},[c("td",null,"学号"),c("td",null,"姓名"),c("td",null,"班级"),c("td",null,"课程号"),c("td",null,"课程名"),c("td",null,"学分"),c("td",null,"成绩"),c("td",null,"操作")],-1),j=["onClick"],E=["onClick"],z={id:"favDialog",onclose:"close()",style:{position:"absolute",top:"300px",left:"300px",width:"300px",height:"210px"}},F=c("div",{class:"base_title"},"成绩添加修改对话框",-1),S={class:"dialog-div",style:{"margin-top":"5px"}},A={class:"dialog-content"},G=c("td",{colspan:"1",style:{"text-align":"right"}},"课程号",-1),H={colspan:"1"},J=c("option",{value:"0"},"请选择...",-1),K=["value"],M=c("td",{colspan:"1",style:{"text-align":"right"}},"课程名",-1),O={colspan:"1"},P=c("option",{value:"0"},"请选择...",-1),Q=["value"],R=c("td",{colspan:"1",style:{"text-align":"right"}},"成绩",-1),T={colspan:"1"},W={colspan:"2"};const X=o(v,[["render",function(t,e,s,l,d,i){return y(),u(p,null,[c("div",b,[f,c("div",k,[c("div",x,[c("button",{class:"commButton",onClick:e[0]||(e[0]=e=>t.addItem())},"添加")]),c("div",_,[L,m(c("select",{class:"commInput","onUpdate:modelValue":e[1]||(e[1]=e=>t.studentId=e)},[w,(y(!0),u(p,null,I(t.studentList,(t=>(y(),u("option",{key:t.id,value:t.id},g(t.title),9,B)))),128))],512),[[r,t.studentId]]),C,m(c("select",{class:"commInput","onUpdate:modelValue":e[2]||(e[2]=e=>t.courseId=e)},[q,(y(!0),u(p,null,I(t.courseList,(t=>(y(),u("option",{key:t.id,value:t.id},g(t.title),9,N)))),128))],512),[[r,t.courseId]]),c("button",{style:{"margin-left":"5px"},class:"commButton",onClick:e[3]||(e[3]=e=>t.query())}," 查询 ")])]),c("div",U,[c("table",V,[D,(y(!0),u(p,null,I(t.scoreList,(e=>(y(),u("tr",{key:e.scoreId},[c("td",null,g(e.studentNum),1),c("td",null,g(e.studentName),1),c("td",null,g(e.className),1),c("td",null,g(e.courseNum),1),c("td",null,g(e.courseName),1),c("td",null,g(e.credit),1),c("td",null,g(e.mark),1),c("td",null,[c("button",{class:"table_edit_button",onClick:s=>t.editItem(e)}," 编辑 ",8,j),c("button",{class:"table_delete_button",onClick:s=>t.deleteItem(e.scoreId)}," 删除 ",8,E)])])))),128))])])]),c("dialog",z,[F,c("div",S,[c("table",A,[c("tr",null,[G,c("td",H,[m(c("select",{class:"commInput","onUpdate:modelValue":e[4]||(e[4]=e=>t.editedItem.studentId=e)},[J,(y(!0),u(p,null,I(t.studentList,(t=>(y(),u("option",{key:t.id,value:t.id},g(t.title),9,K)))),128))],512),[[r,t.editedItem.studentId]])])]),c("tr",null,[M,c("td",O,[m(c("select",{class:"commInput","onUpdate:modelValue":e[5]||(e[5]=e=>t.editedItem.courseId=e)},[P,(y(!0),u(p,null,I(t.courseList,(t=>(y(),u("option",{key:t.id,value:t.id},g(t.title),9,Q)))),128))],512),[[r,t.editedItem.courseId]])])]),c("tr",null,[R,c("td",T,[m(c("input",{"onUpdate:modelValue":e[6]||(e[6]=e=>t.editedItem.mark=e),class:"commInput"},null,512),[[h,t.editedItem.mark]])])]),c("tr",null,[c("td",W,[c("button",{class:"commButton",onClick:e[7]||(e[7]=e=>t.close()),style:{"margin-right":"30px"}}," 取消 "),c("button",{class:"commButton",onClick:e[8]||(e[8]=e=>t.confirm())},"确认")])])])])])],64)}]]);export{X as default};
