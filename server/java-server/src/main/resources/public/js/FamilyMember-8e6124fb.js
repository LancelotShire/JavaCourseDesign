import{d as e,_ as t,c as l,e as a,q as s,s as d,E as o,I as i,o as n,y as u,n as r,F as c,p as m,O as h,K as p,H as w,P as b,Q as f}from"./index-2741d3dc.js";/* empty css                     *//* empty css                 *//* empty css              *//* empty css            *//* empty css               *//* empty css               */import{c as g,f as V,d as _}from"./personServ-2b68bf73.js";import{m as y,a as v}from"./messageBox-46718661.js";const k=e({data:()=>({genderList:[{value:"1",title:"男"},{value:"2",title:"女"}],studentId:null,dataList:[]}),async created(){const e=this.$route.query.studentId;null!=e&&(this.studentId=parseInt(e.toString())),null!=this.studentId&&(this.dataList=await g(this.studentId))},methods:{addRow(){this.dataList.push({studentId:this.studentId})},async saveItem(e){const t=this.dataList[e],l=await V(t);0==l.code?y(this,"保存成功"):y(this,l.msg)},async deleteItem(e){if(!(await v("确认删除当前成员吗?")))return;const t=await _(this.dataList[e].memberId);0==t.code?(y(this,"删除成功"),this.dataList.splice(e,1)):y(this,t.msg)}}}),I={class:"base_form"},x=a("div",{class:"base_header"},[a("div",{class:"blue_column"}),a("div",{class:"base_title"},"学生家庭成员信息")],-1),L={class:"base_query_oneLine"},U={class:"query_left"},j={class:"table-content"};const q=t(k,[["render",function(e,t,g,V,_,y){const v=o,k=p,q=w,C=b,B=f,E=i;return n(),l("div",I,[x,a("div",L,[a("div",U,[s(v,{class:"commButton",onClick:t[0]||(t[0]=t=>e.addRow())},{default:d((()=>[u("添加一行")])),_:1})])]),a("div",j,[s(E,{data:e.dataList,"header-cell-style":{color:"#2E2E2E",fontSize:"10px",fontWeight:"400",background:"rgb(242,242,242)"},"row-style":{height:"10px"},"cell-style":{padding:"2px"},style:{width:"100%"}},{default:d((()=>[s(k,{label:"序号",fixed:"left",width:"50",color:"black"},{default:d((e=>[u(r(e.$index+1),1)])),_:1}),s(k,{label:"关系",width:"150",color:"black",align:"center"},{default:d((e=>[s(q,{modelValue:e.row.relation,"onUpdate:modelValue":t=>e.row.relation=t,style:{width:"90%"}},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),s(k,{label:"姓名",width:"150",color:"black",align:"center"},{default:d((e=>[s(q,{modelValue:e.row.name,"onUpdate:modelValue":t=>e.row.name=t,style:{width:"90%"}},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),s(k,{label:"性别",width:"150",color:"black",align:"center"},{default:d((t=>[s(B,{modelValue:t.row.gender,"onUpdate:modelValue":e=>t.row.gender=e,placeholder:"请选择性别",style:{width:"90%"}},{default:d((()=>[(n(!0),l(c,null,m(e.genderList,(e=>(n(),h(C,{key:e.value,label:e.title,value:e.value},null,8,["label","value"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue"])])),_:1}),s(k,{label:"年龄",width:"100",color:"black",align:"center"},{default:d((e=>[s(q,{modelValue:e.row.age,"onUpdate:modelValue":t=>e.row.age=t,style:{width:"90%"}},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),s(k,{label:"单位",width:"150",color:"black",align:"center"},{default:d((e=>[s(q,{modelValue:e.row.unit,"onUpdate:modelValue":t=>e.row.unit=t,style:{width:"90%"}},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),s(k,{label:"操作",width:"150",color:"black",align:"center"},{default:d((t=>[s(v,{class:"commButton",onClick:l=>e.saveItem(t.$index)},{default:d((()=>[u("保存")])),_:2},1032,["onClick"]),s(v,{class:"commButton",onClick:l=>e.deleteItem(t.$index)},{default:d((()=>[u("删除")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data","header-cell-style"])])])}]]);export{q as default};
