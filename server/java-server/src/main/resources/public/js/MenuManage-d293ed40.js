import{d as e,D as t,_ as s,c as i,e as d,q as l,s as o,h as a,n,w as r,v as c,y as h,F as u,G as p,o as m}from"./index-2741d3dc.js";/* empty css             *//* empty css                 */import{g,a as y,m as N,b as x}from"./systemServ-4fa92e96.js";import{m as b,a as f}from"./messageBox-46718661.js";const T=e({data:()=>({nodes:[],editedNode:{},currentNode:{},roleList:[],dialogTitle:"",disabled:!1,editType:0,roleAdmin:!1,roleStudent:!1,roleTeacher:!1,defaultProps:{children:"children",label:"label"}}),async created(){this.roleList=await g(),this.nodes=await y()},methods:{addItemFirst(){this.editedNode={},this.editedNode.pid=null,this.editedNode.parentTitle="",this.roleAdmin=!1,this.roleStudent=!1,this.roleTeacher=!1,this.dialogTitle="添加一级菜单对话框",this.disabled=!1,this.editType=0,t("favDialog").show()},addItem(e){this.currentNode=e,this.editedNode={},this.editedNode.pid=this.currentNode.id,this.editedNode.parentTitle=this.currentNode.title,this.roleAdmin=!1,this.roleStudent=!1,this.roleTeacher=!1,this.dialogTitle="添加菜单对话框",this.disabled=!1,this.editType=1,t("favDialog").show()},editItem(e){this.currentNode=e,this.editedNode=this.currentNode,this.roleAdmin=!1,this.roleStudent=!1,this.roleTeacher=!1,null!=this.currentNode.userTypeIds&&null!=this.currentNode.userTypeIds&&""!=this.currentNode.userTypeIds&&(this.currentNode.userTypeIds.indexOf("1")>=0?this.roleAdmin=!0:this.roleAdmin=!1,this.currentNode.userTypeIds.indexOf("2")>=0?this.roleStudent=!0:this.roleStudent=!1,this.currentNode.userTypeIds.indexOf("3")>=0?this.roleTeacher=!0:this.roleTeacher=!1),this.dialogTitle="修改菜单对话框",this.disabled=!0,this.editType=2,t("favDialog").show()},close(){t("favDialog").close()},async confirm(){this.close(),this.roleAdmin,this.roleStudent,this.roleAdmin;const e=await N(this.editType,this.editedNode);0==e.code?(b(this,"保存成功"),this.nodes=await y()):b(this,e.msg)},async deleteItem(e){this.currentNode=e;if(!(await f("确认删除吗?")))return;const t=await x(this.currentNode.id);0==t.code?(b(this,"删除成功"),this.nodes=await y()):b(this,t.msg)}}}),k={class:"base_form"},v=d("div",{class:"base_header"},[d("div",{class:"blue_column"}),d("div",{class:"base_title"},"菜单管理")],-1),I={class:"base_query_oneLine"},w={class:"query_left"},_={key:0,class:"custom-tree-container"},A={class:"custom-tree-node"},C=["onClick"],S=["onClick"],D=["onClick"],j={id:"favDialog",onclose:"close()",style:{position:"absolute",top:"300px",left:"300px",width:"300px",height:"310px"}},q={class:"base_title"},B={class:"dialog-div",style:{"margin-top":"5px"}},F={class:"dialog-content"},L=d("td",{colspan:"1",style:{"text-align":"right"}},"父节点",-1),O={colspan:"1"},U=d("td",{colspan:"1",style:{"text-align":"right"}},"主键ID",-1),V={colspan:"1"},G=["disabled"],P=d("td",{colspan:"1",style:{"text-align":"right"}},"菜单名称",-1),z={colspan:"1"},E=d("td",{colspan:"1",style:{"text-align":"right"}},"菜单标题",-1),H={colspan:"1"},J=d("td",{colspan:"1",style:{"text-align":"right"}},"角色",-1),K={colspan:"1"},M=["checked"],Q=["checked"],R=["checked"],W={colspan:"2"};const X=s(T,[["render",function(e,t,s,g,y,N){const x=p;return m(),i(u,null,[d("div",k,[v,d("div",I,[d("div",w,[d("button",{style:{"margin-left":"5px"},class:"commButton",onClick:t[0]||(t[0]=(...t)=>e.addItemFirst&&e.addItemFirst(...t))}," 添加一级菜单 ")])]),null!==e.nodes?(m(),i("div",_,[l(x,{data:e.nodes,"show-checkbox":"","node-key":"id","default-expand-all":"","expand-on-click-node":!1},{default:o((({node:t,data:s})=>[d("span",A,[d("span",null,n(t.label),1),d("span",null,[d("a",{onClick:t=>e.addItem(s)}," 添加 ",8,C),d("a",{style:{"margin-left":"5px"},onClick:t=>e.editItem(s)}," 修改 ",8,S),d("a",{style:{"margin-left":"5px"},onClick:t=>e.deleteItem(s)}," 删除 ",8,D)])])])),_:1},8,["data"])])):a("",!0)]),d("dialog",j,[d("div",q,n(e.dialogTitle),1),d("div",B,[d("table",F,[d("tr",null,[L,d("td",O,n(e.editedNode.parentTitle),1)]),d("tr",null,[U,d("td",V,[r(d("input",{"onUpdate:modelValue":t[1]||(t[1]=t=>e.editedNode.id=t),class:"commInput",disabled:e.disabled},null,8,G),[[c,e.editedNode.id]])])]),d("tr",null,[P,d("td",z,[r(d("input",{"onUpdate:modelValue":t[2]||(t[2]=t=>e.editedNode.value=t),class:"commInput"},null,512),[[c,e.editedNode.value]])])]),d("tr",null,[E,d("td",H,[r(d("input",{"onUpdate:modelValue":t[3]||(t[3]=t=>e.editedNode.title=t),class:"commInput"},null,512),[[c,e.editedNode.title]])])]),d("tr",null,[J,d("td",K,[d("input",{type:"checkbox",checked:e.roleAdmin},null,8,M),h("管理员 "),d("input",{type:"checkbox",checked:e.roleStudent},null,8,Q),h("学生 "),d("input",{type:"checkbox",checked:e.roleTeacher},null,8,R),h("教师 ")])]),d("tr",null,[d("td",W,[d("button",{class:"commButton",onClick:t[4]||(t[4]=t=>e.close()),style:{"margin-right":"30px","margin-left":"80px"}}," 取消 "),d("button",{class:"commButton",onClick:t[5]||(t[5]=t=>e.confirm())},"确认")])])])])])],64)}]]);export{X as default};
